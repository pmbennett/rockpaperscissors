<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>
        function compPlay() {
            let key = Math.floor(Math.random() * 3);
            let choice;
            //assigns number value to rock, paper, and scissors
            if (key == 0) {
                choice = "rock";
            } else if (key == 1) {
                choice = "paper";
            } else if (key == 2) {
                choice = "scissors";
            }
            return choice;
        }
        //Plays a round of the game and returns winner
        function playRound(playerSel, compSel) {
            let uChoice = playerSel.toLowerCase(); //converts playerChoice to lowercase
            let cChoice = compSel; //computer choice

            let cNum;
            let uNum;
            if (cChoice == "rock") {
                cNum = 0;
            } else if (cChoice == "paper") {
                cNum = 1;
            } else if (cChoice == "scissors") {
                cNum = 2;
            }

            if (uChoice == "rock") {
                uNum = 0;
            } else if (uChoice == "paper") {
                uNum = 1;
            } else if (uChoice == "scissors") {
                uNum = 2;
            }

            let playerWin;
            let compWin;

            if (cNum == uNum) {
                console.log("It's a tie!");
                return;
            } else if (uNum == 0 && cNum == 1) {
                playerWin = false;
                compWin = true;
                console.log("You lose! Paper beats Rock");
            } else if (uNum == 1 && cNum == 0) {
                playerWin = true;
                compWin = false;
                console.log("You win! Paper beats Rock");
            } else if (uNum == 1 && cNum == 2) {
                playerWin = false;
                compWin = true;
                console.log("You lose! Scissors beats Paper");
            } else if (uNum == 2 && cNum == 1) {
                playerWin = true;
                compWin = false;
                console.log("You win! Scissors beats Paper");
            } else if (uNum == 2 && cNum == 0) {
                playerWin = false;
                compWin = true;
                console.log("You lose! Rock beats Scissors");
            } else if (uNum == 0 && cNum == 2) {
                playerWin = true;
                compWin = false;
                console.log("You win! Rock beats Scissors");
            }


            return playerWin;
        }

        function game() {
            let playerWin = 0;
            let compWin = 0;
            for (let i = 0; i < 5; i++) {
                let input = prompt("Enter 'rock', 'paper', or 'scissors'");
                let result = playRound(input, compPlay());

                if (result == true) {
                    playerWin++;
                } else if (result == false) {
                    compWin++;
                }
            }
            let finalTally = 0;
            if (playerWin > compWin) {
                finalTally = playerWin - compWin;
            } else if (playerWin < compWin) {
                finalTally = compWin - playerWin;
            }

            let finalWinner;
            if (playerWin > compWin) {
                finalWinner = `You beat the computer by ${finalTally} point(s), with a score of ${playerWin} to ${compWin}.`;
            } else if (compWin > playerWin) {
                finalWinner = `The computer beat you by ${finalTally} point(s), with a score of ${compWin} to ${playerWin}.`;
            } else {
                finalWinner = `It was a tie! The final score was ${playerWin} to ${compWin}.`;
            }
            return finalWinner;
        }

        console.log(game());
    </script>
</body>